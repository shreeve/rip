<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rip in the Browser</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .example {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    pre {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
    }
    code {
      font-family: 'Monaco', 'Courier New', monospace;
    }
    h1 { color: #333; }
    h2 { color: #666; margin-top: 0; }
  </style>
</head>
<body>
  <h1>ðŸš€ Rip in the Browser</h1>

  <div class="example">
    <h2>Example 1: Simple Compilation</h2>
    <pre><code id="example1-rip"></code></pre>
    <pre><code id="example1-output"></code></pre>
  </div>

  <div class="example">
    <h2>Example 2: Run Code Directly</h2>
    <pre><code id="example2-rip"></code></pre>
    <div id="example2-output"></div>
  </div>

  <div class="example">
    <h2>Example 3: Async Support</h2>
    <pre><code id="example3-rip"></code></pre>
    <div id="example3-output"></div>
  </div>

  <script type="module">
    // Import the Rip browser API
    // In production: import Rip from 'rip/browser'
    import Rip from '../lib/rip/browser.js'

    // Example 1: Simple compilation
    const ripCode1 = `
greet = (name) -> "Hello, #{name}!"
squares = (x * x for x in [1, 2, 3, 4, 5])
{greet, squares}
`.trim()

    document.getElementById('example1-rip').textContent = ripCode1
    const js1 = Rip.compile(ripCode1)
    document.getElementById('example1-output').textContent = js1

    // Example 2: Run code directly
    const ripCode2 = `
# Array comprehensions
numbers = [1, 2, 3, 4, 5]
doubled = (n * 2 for n in numbers)

# Object destructuring
user = {name: 'Alice', age: 30}
{name, age} = user

# Build result
result = {
  original: numbers
  doubled: doubled
  user: {name, age}
}

# Update DOM
el = document.getElementById('example2-output')
el.innerHTML = """
  <strong>Original:</strong> #{numbers.join(', ')}<br>
  <strong>Doubled:</strong> #{doubled.join(', ')}<br>
  <strong>User:</strong> #{name}, #{age} years old
"""

result
`.trim()

    document.getElementById('example2-rip').textContent = ripCode2
    const result2 = Rip.run(ripCode2)
    console.log('Example 2 result:', result2)

    // Example 3: Async support
    const ripCode3 = `
# Simulated async API call
fetchUserData = (id) ->
  new Promise (resolve) ->
    setTimeout ->
      resolve {id, name: "User #{id}", email: "user#{id}@example.com"}
    , 500

# Use the data
userData = await fetchUserData(123)

# Update DOM
el = document.getElementById('example3-output')
el.innerHTML = """
  <strong>Fetched user data:</strong><br>
  ID: #{userData.id}<br>
  Name: #{userData.name}<br>
  Email: #{userData.email}
"""

userData
`.trim()

    document.getElementById('example3-rip').textContent = ripCode3

    // Run async code
    ;(async () => {
      const result3 = await Rip.run(ripCode3)
      console.log('Example 3 result:', result3)
    })()

    console.log('âœ… All Rip examples loaded successfully!')
  </script>
</body>
</html>
