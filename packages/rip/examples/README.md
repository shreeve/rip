# Rip Examples

This directory contains examples showing different ways to use Rip.

## üéØ Simple API (Node.js or Bun)

The simplest way to compile Rip code to JavaScript:

```javascript
import { compile } from 'rip'

const js = compile(`
  greet = (name) -> "Hello, #{name}!"
  greet('World')
`)

console.log(js) // JavaScript output
```

**Run the example:**
```bash
node examples/simple-api.js
```

## üåê Browser Usage

### Auto-Execute Tags (Easiest!)

The browser module automatically processes `<script type="text/rip">` tags:

```html
<!-- Include the browser module once -->
<script type="module" src="./node_modules/rip/lib/rip/browser.js"></script>

<!-- Write Rip code anywhere - runs automatically! -->
<script type="text/rip">
  x = (y for y in [2..5] when y isnt 3)
  console.log 'Result:', x
</script>
```

**View the examples:**
- `browser-tags-simple.html` - Minimal example
- `browser-tags-example.html` - Full-featured demo

### Programmatic API

Also use the browser module for manual control:

```html
<script type="module">
  import Rip from 'rip/browser'

  // Compile Rip to JavaScript
  const js = Rip.compile(`
    greet = (name) -> "Hello, #{name}!"
  `)

  // Or run directly
  Rip.run(`
    console.log 'Hello from Rip in the browser!'
  `)

  // Or load external .rip file
  await Rip.load('./app.rip')
</script>
```

**View the examples:**
```bash
# Start a simple HTTP server
python3 -m http.server 8000
# Then open:
# - http://localhost:8000/examples/browser-tags-simple.html
# - http://localhost:8000/examples/browser-tags-example.html
# - http://localhost:8000/examples/browser-example.html
```

## üöÄ Bun Integration

Use `.rip` files directly in Bun with zero configuration:

**1. Setup (one time):**

Add to your `bunfig.toml`:
```toml
[bun]
preload = ["rip/bun"]
```

**2. Use anywhere:**

```typescript
// Import .rip files like normal TypeScript!
import { myFunc } from './app.rip'

myFunc()
```

**Run the example:**
```bash
cd examples/bun-example
bun run main.ts
```

## üìù API Reference

### Core API (`rip`)

```javascript
import { compile } from 'rip'

// Returns: JavaScript string
const js = compile(ripSource)

// With source maps: returns { js, sourceMap, v3SourceMap }
const result = compile(ripSource, { sourceMap: true })
```

### Browser API (`rip/browser`)

**Auto-processes tags:**
```html
<script type="module" src="rip/browser.js"></script>

<script type="text/rip">
  console.log 'This runs automatically!'
</script>
```

**Programmatic usage:**

```javascript
import Rip from 'rip/browser'

// Compile to JavaScript
const js = Rip.compile(ripSource, options)

// Run code directly
const result = Rip.run(ripSource, options)

// Load and run external file
await Rip.load(url, options)
```

### Full API

```javascript
import Rip from 'rip'

// Compile (returns string or object with sourceMap)
const result = Rip.compile(source, {
  bare: true,          // No function wrapper (default: true)
  sourceMap: false,    // Generate source map (default: false)
  filename: 'app.rip', // Filename for source map
  inlineMap: false,    // Inline source map
})

// If sourceMap is true, result is { js, v3SourceMap, sourceMap }
// Otherwise, result is just the JavaScript string
```

## üé® Options

All compile functions accept these options:

- `bare` (boolean, default: `true`) - Don't wrap in function
- `sourceMap` (boolean, default: `false`) - Generate source map
- `filename` (string) - Source filename for error messages and source maps
- `inlineMap` (boolean, default: `false`) - Inline source map in output
- `header` (boolean, default: `false`) - Add "Generated by Rip" comment

## üéØ Which API Should I Use?

- **`rip/browser`** - For browsers (auto tags + programmatic API)
- **`rip`** - For compilation, build tools, scripts (simple by default, powerful when needed)
- **`rip/bun`** - For Bun projects (via bunfig.toml preload)

## üöÄ Next Steps

1. Check out the [main README](../README.md) for language features
2. See the [test directory](../test/) for more examples
3. Read the [language documentation](https://github.com/shreeve/rip)
